{% extends "base.html" %}
{% block content %}
<div class="dashboard-items container columns is-multiline">
  <section class="section global column is-one-third">
    <div class="section-header">
      <h1>Global Statistics</h1>
    </div>
    <div class="section-content">
      <ul>
        <li><span>Number of users:</span> <span>{{num_users}}</span></li>
        <li><span>Number of MailChimp subscribers:</span> <span>{{num_mailchimp_subscribers}}</span></li>
      </ul>
    </div>
    <div class="bg"></div>
  </section>

  {% for challenge in challenges %}
   <section class="section column is-one-third">
    <div class="section-header">
      <h1>{{ challenge.challenge.name }}</h1>
    </div>
    <div class="section-content">
      <ul>
        <li><span>Number of teams:</span> <span>{{ challenge.num_teams }}</span></li>
        <li><span>Number of approaches:</span> <span>{{ challenge.num_approaches }}</span></li>
        <li><span>Number of successful submissions:</span> <span>{{ challenge.num_successful_submissions }}</span></li>
      </ul>

      {% for task in challenge.challenge.tasks.all %}
      <form id="request-submission-bundle-{{ task.id }}" action="{% url 'request-submission-bundle' task.id %}?next={{ request.path|urlencode }}" method="POST">{% csrf_token %}</form>
      <a href="#"
         onclick="document.getElementById('request-submission-bundle-{{ task.id }}').submit()">
          generate submission bundle for {{ task.name }}
      </a>
      {% endfor %}

    </div>
  </section>
  {% endfor %}
</div>

{% endblock %}
